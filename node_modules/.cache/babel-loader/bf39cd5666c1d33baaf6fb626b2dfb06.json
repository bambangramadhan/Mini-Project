{"ast":null,"code":"import _classCallCheck from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bambang/Desktop/Mini-Project/src/components/Movie/MovieDetail.js\";\nimport React, { Component } from 'react';\nimport Casts from './Casts';\nimport Related from './Related';\nimport Recommended from './Recommended';\nimport Trailers from './Trailers';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport NumberFormat from 'react-number-format';\nimport * as AppActions from '../../actions';\nimport { reactLocalStorage } from 'reactjs-localstorage';\nimport { NavLink } from 'react-router-dom';\n\nvar MovieDetail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MovieDetail, _Component);\n\n  function MovieDetail() {\n    _classCallCheck(this, MovieDetail);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MovieDetail).apply(this, arguments));\n  }\n\n  _createClass(MovieDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var purchased = [];\n      var balance;\n\n      if (this.props.purchasedlist.length !== 0) {\n        purchased = JSON.parse(this.props.purchasedlist);\n        balance = purchased.balance;\n        purchased = purchased.purchasedlist;\n        reactLocalStorage.set('balance', this.props.purchasedlist);\n      }\n\n      var id = this.props.match.params.id.split('-')[0];\n      this.props.actions.getMovie(id);\n    }\n  }, {\n    key: \"dispatchBalance\",\n    value: function dispatchBalance(balance, price, movid, purchased, e) {\n      if (balance < price) {\n        alert(\"Insufficient balance\");\n        return false;\n      } else if (purchased.indexOf(movid) >= 0) {\n        alert(\"Already purchased\");\n        return false;\n      } else {\n        purchased.push(movid);\n        this.props.actions.balancePurchase(balance - price, purchased);\n        reactLocalStorage.set('balance', JSON.stringify({\n          'type': 'BALANCE_FETCH_DATA_SUCCESS',\n          'balance': balance - price,\n          'purchasedlist': purchased\n        }));\n        return true;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var _this$props = this.props,\n          movie = _this$props.movie,\n          actions = _this$props.actions;\n      console.log(this.props.purchasedlist);\n      var movieID = this.props.match.params.id.split('-')[0];\n      var movid = parseInt(movieID);\n      var purchased = [];\n      var balance = 0;\n\n      if (this.props.purchasedlist.length !== 0) {\n        purchased = JSON.parse(this.props.purchasedlist);\n        balance = purchased.balance;\n        purchased = purchased.purchasedlist;\n      }\n\n      var price = 0;\n\n      if (movie.vote_average < 4) {\n        price = 3500;\n      } else if (movie.vote_average < 7) {\n        price = 8250;\n      } else if (movie.vote_average < 9) {\n        price = 16350;\n      } else {\n        price = 21250;\n      }\n\n      var ispurchased;\n\n      if (purchased.indexOf(movid) < 0) {\n        ispurchased = React.createElement(NumberFormat, {\n          value: price,\n          displayType: 'text',\n          thousandSeparator: true,\n          prefix: 'Rp ',\n          renderText: function renderText(value) {\n            return React.createElement(\"button\", {\n              onClick: _this.dispatchBalance.bind(_this, balance, price, movid, purchased),\n              className: \"btnbuy\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 66\n              },\n              __self: this\n            }, \"Buy \", value);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        });\n      } else {\n        ispurchased = React.createElement(\"button\", {\n          disabled: true,\n          className: \"btnbuy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, \"Purchase\");\n      }\n\n      var headerStyles = {\n        backgroundImage: \"url(https://image.tmdb.org/t/p/w780\".concat(movie.backdrop_path, \")\")\n      }; // console.log(movie.poster_path);\n\n      return React.createElement(\"main\", {\n        className: \"main\",\n        role: \"main\",\n        style: headerStyles,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"topnav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Home\"), React.createElement(\"div\", {\n        className: \"right_bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        style: {\n          color: \"blue\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Rp. 100,000\"))), React.createElement(\"div\", {\n        className: \"movie-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movie_image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"https://image.tmdb.org/t/p/w500\".concat(movie.poster_path),\n        alt: movie.original_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"details-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"movie-details_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, movie.original_title), React.createElement(\"h2\", {\n        className: \"boldline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, movie.tagline), React.createElement(\"p\", {\n        className: \"movie-details_body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, movie.overview), React.createElement(\"div\", {\n        className: \"list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"movie-details_rating\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Rating : \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, movie.vote_average)), React.createElement(\"p\", {\n        className: \"movie-details_date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Release date : \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, movie.release_date)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Duration : \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, movie.runtime, \" min\")), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, \"Revenue : \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, movie.revenue)), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), purchased)), React.createElement(\"div\", {\n        className: \"col-sm-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Casts :\"), React.createElement(Casts, {\n        movieID: movieID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-sm-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Trailers :\"), React.createElement(Trailers, {\n        movieID: movieID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Related Films :\"), React.createElement(Related, {\n        movieID: movieID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-sm-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Recommended :\"), React.createElement(Recommended, {\n        movieID: movieID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return MovieDetail;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    movie: state.movie,\n    purchasedlist: state.balance\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(AppActions, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieDetail);","map":{"version":3,"sources":["/home/bambang/Desktop/Mini-Project/src/components/Movie/MovieDetail.js"],"names":["React","Component","Casts","Related","Recommended","Trailers","bindActionCreators","connect","NumberFormat","AppActions","reactLocalStorage","NavLink","MovieDetail","purchased","balance","props","purchasedlist","length","JSON","parse","set","id","match","params","split","actions","getMovie","price","movid","e","alert","indexOf","push","balancePurchase","stringify","movie","console","log","movieID","parseInt","vote_average","ispurchased","value","dispatchBalance","bind","headerStyles","backgroundImage","backdrop_path","color","poster_path","original_title","tagline","overview","release_date","runtime","revenue","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAAQC,kBAAR,QAAiC,OAAjC;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAO,KAAKC,UAAZ,MAA4B,eAA5B;AACA,SAAQC,iBAAR,QAAgC,sBAAhC;AACA,SAASC,OAAT,QAAwB,kBAAxB;;IAEMC,W;;;;;;;;;;;;;wCACe;AACjB,UAAIC,SAAS,GAAG,EAAhB;AACA,UAAIC,OAAJ;;AACA,UAAG,KAAKC,KAAL,CAAWC,aAAX,CAAyBC,MAAzB,KAAoC,CAAvC,EAAyC;AACvCJ,QAAAA,SAAS,GAAGK,IAAI,CAACC,KAAL,CAAW,KAAKJ,KAAL,CAAWC,aAAtB,CAAZ;AACAF,QAAAA,OAAO,GAAGD,SAAS,CAACC,OAApB;AACAD,QAAAA,SAAS,GAAGA,SAAS,CAACG,aAAtB;AACAN,QAAAA,iBAAiB,CAACU,GAAlB,CAAsB,SAAtB,EAAiC,KAAKL,KAAL,CAAWC,aAA5C;AACD;;AACD,UAAIK,EAAE,GAAG,KAAKN,KAAL,CAAWO,KAAX,CAAiBC,MAAjB,CAAwBF,EAAxB,CAA2BG,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAT;AACA,WAAKT,KAAL,CAAWU,OAAX,CAAmBC,QAAnB,CAA4BL,EAA5B;AACD;;;oCAEeP,O,EAASa,K,EAAOC,K,EAAOf,S,EAAWgB,C,EAAG;AACnD,UAAGf,OAAO,GAAGa,KAAb,EAAmB;AACjBG,QAAAA,KAAK,CAAC,sBAAD,CAAL;AACA,eAAO,KAAP;AACD,OAHD,MAGM,IAAGjB,SAAS,CAACkB,OAAV,CAAkBH,KAAlB,KAA4B,CAA/B,EAAiC;AACrCE,QAAAA,KAAK,CAAC,mBAAD,CAAL;AACA,eAAO,KAAP;AACD,OAHK,MAGD;AACHjB,QAAAA,SAAS,CAACmB,IAAV,CAAeJ,KAAf;AACA,aAAKb,KAAL,CAAWU,OAAX,CAAmBQ,eAAnB,CAAmCnB,OAAO,GAACa,KAA3C,EAAkDd,SAAlD;AACAH,QAAAA,iBAAiB,CAACU,GAAlB,CAAsB,SAAtB,EAAiCF,IAAI,CAACgB,SAAL,CAAe;AAAC,kBAAQ,4BAAT;AAAsC,qBAAYpB,OAAO,GAACa,KAA1D;AAAiE,2BAAiBd;AAAlF,SAAf,CAAjC;AACA,eAAO,IAAP;AACD;AACF;;;6BAEO;AAAA;;AAAA,wBACmB,KAAKE,KADxB;AAAA,UACCoB,KADD,eACCA,KADD;AAAA,UACQV,OADR,eACQA,OADR;AAENW,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKtB,KAAL,CAAWC,aAAvB;AACA,UAAIsB,OAAO,GAAG,KAAKvB,KAAL,CAAWO,KAAX,CAAiBC,MAAjB,CAAwBF,EAAxB,CAA2BG,KAA3B,CAAiC,GAAjC,EAAsC,CAAtC,CAAd;AACA,UAAII,KAAK,GAAGW,QAAQ,CAACD,OAAD,CAApB;AACA,UAAIzB,SAAS,GAAG,EAAhB;AACA,UAAIC,OAAO,GAAG,CAAd;;AACA,UAAG,KAAKC,KAAL,CAAWC,aAAX,CAAyBC,MAAzB,KAAoC,CAAvC,EAAyC;AACvCJ,QAAAA,SAAS,GAAGK,IAAI,CAACC,KAAL,CAAW,KAAKJ,KAAL,CAAWC,aAAtB,CAAZ;AACAF,QAAAA,OAAO,GAAID,SAAS,CAACC,OAArB;AACAD,QAAAA,SAAS,GAAGA,SAAS,CAACG,aAAtB;AACD;;AACD,UAAIW,KAAK,GAAG,CAAZ;;AACA,UAAGQ,KAAK,CAACK,YAAN,GAAqB,CAAxB,EAA0B;AACxBb,QAAAA,KAAK,GAAG,IAAR;AACD,OAFD,MAEM,IAAGQ,KAAK,CAACK,YAAN,GAAqB,CAAxB,EAA0B;AAC9Bb,QAAAA,KAAK,GAAG,IAAR;AACD,OAFK,MAEA,IAAGQ,KAAK,CAACK,YAAN,GAAqB,CAAxB,EAA0B;AAC9Bb,QAAAA,KAAK,GAAG,KAAR;AACD,OAFK,MAED;AACHA,QAAAA,KAAK,GAAG,KAAR;AACD;;AACD,UAAIc,WAAJ;;AACA,UAAG5B,SAAS,CAACkB,OAAV,CAAkBH,KAAlB,IAA2B,CAA9B,EAAgC;AAC9Ba,QAAAA,WAAW,GAAG,oBAAC,YAAD;AAAc,UAAA,KAAK,EAAEd,KAArB;AAA4B,UAAA,WAAW,EAAE,MAAzC;AAAiD,UAAA,iBAAiB,EAAE,IAApE;AAA0E,UAAA,MAAM,EAAE,KAAlF;AAAyF,UAAA,UAAU,EAAE,oBAAAe,KAAK;AAAA,mBAAI;AAAQ,cAAA,OAAO,EAAE,KAAI,CAACC,eAAL,CAAqBC,IAArB,CAA0B,KAA1B,EAAgC9B,OAAhC,EAAyCa,KAAzC,EAAgDC,KAAhD,EAAuDf,SAAvD,CAAjB;AAAoF,cAAA,SAAS,EAAC,QAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAA4G6B,KAA5G,CAAJ;AAAA,WAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAd;AACD,OAFD,MAEK;AACHD,QAAAA,WAAW,GAAG;AAAQ,UAAA,QAAQ,MAAhB;AAAiB,UAAA,SAAS,EAAC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAd;AACD;;AAED,UAAMI,YAAY,GAAG;AACnBC,QAAAA,eAAe,+CAAwCX,KAAK,CAACY,aAA9C;AADI,OAArB,CA7BM,CAiCN;;AACA,aACE;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAuB,QAAA,IAAI,EAAC,MAA5B;AAAmC,QAAA,KAAK,EAAEF,YAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEA;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,OAAD;AAAS,QAAA,EAAE,EAAC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAE;AAACG,UAAAA,KAAK,EAAE;AAAR,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,CAFF,CAFA,EASE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,GAAG,2CAAoCb,KAAK,CAACc,WAA1C,CAAR;AAAiE,QAAA,GAAG,EAAEd,KAAK,CAACe,cAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAIE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,qBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqCf,KAAK,CAACe,cAA3C,CADF,EAEE;AAAI,QAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0Bf,KAAK,CAACgB,OAAhC,CAFF,EAGE;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAmChB,KAAK,CAACiB,QAAzC,CAHF,EAIE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAG,QAAA,SAAS,EAAC,sBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOjB,KAAK,CAACK,YAAb,CAA7C,CADF,EAEE;AAAG,QAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOL,KAAK,CAACkB,YAAb,CAAjD,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOlB,KAAK,CAACmB,OAAb,SAAd,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOnB,KAAK,CAACoB,OAAb,CAAb,CAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,EAMG1C,SANH,CAJF,CAJF,EAkBE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAI,QAAA,SAAS,EAAC,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADA,EAGE,oBAAC,KAAD;AAAO,QAAA,OAAO,EAAEyB,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF,CAlBF,EAyBE;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAEE,oBAAC,QAAD;AAAU,QAAA,OAAO,EAAEA,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAzBF,EA8BE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,EAEE,oBAAC,OAAD;AAAS,QAAA,OAAO,EAAEA,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CA9BF,EAmCE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE,oBAAC,WAAD;AAAa,QAAA,OAAO,EAAEA,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAnCF,CATF,CADF;AAqDD;;;;EApHuBrC,S;;AA0H1B,SAASuD,eAAT,CAAyBC,KAAzB,EAA+B;AAC7B,SAAM;AACJtB,IAAAA,KAAK,EAAEsB,KAAK,CAACtB,KADT;AAEJnB,IAAAA,aAAa,EAAEyC,KAAK,CAAC3C;AAFjB,GAAN;AAID;;AAED,SAAS4C,kBAAT,CAA4BC,QAA5B,EAAqC;AACnC,SAAM;AACJlC,IAAAA,OAAO,EAAEnB,kBAAkB,CAACG,UAAD,EAAakD,QAAb;AADvB,GAAN;AAGD;;AAED,eAAepD,OAAO,CACpBiD,eADoB,EAEpBE,kBAFoB,CAAP,CAGb9C,WAHa,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport Casts from './Casts'\nimport Related from './Related'\nimport Recommended from './Recommended'\nimport Trailers from './Trailers'\nimport {bindActionCreators} from 'redux'\nimport {connect} from 'react-redux'\nimport NumberFormat from 'react-number-format';\nimport * as AppActions from '../../actions'\nimport {reactLocalStorage} from 'reactjs-localstorage';\nimport { NavLink } from 'react-router-dom'\n\nclass MovieDetail extends Component {\n  componentDidMount(){\n    let purchased = [];\n    let balance;\n    if(this.props.purchasedlist.length !== 0){\n      purchased = JSON.parse(this.props.purchasedlist);\n      balance = purchased.balance;\n      purchased = purchased.purchasedlist;\n      reactLocalStorage.set('balance', this.props.purchasedlist);\n    }\n    let id = this.props.match.params.id.split('-')[0];\n    this.props.actions.getMovie(id)\n  }\n\n  dispatchBalance(balance, price, movid, purchased, e) {\n    if(balance < price){\n      alert(\"Insufficient balance\");\n      return false;\n    }else if(purchased.indexOf(movid) >= 0){\n      alert(\"Already purchased\");\n      return false;\n    }else{\n      purchased.push(movid);\n      this.props.actions.balancePurchase(balance-price, purchased);\n      reactLocalStorage.set('balance',(JSON.stringify({'type': 'BALANCE_FETCH_DATA_SUCCESS','balance': (balance-price),'purchasedlist': purchased})));\n      return true;\n    }\n  }\n\n  render(){\n    const {movie, actions} = this.props;\n    console.log(this.props.purchasedlist);\n    let movieID = this.props.match.params.id.split('-')[0];\n    let movid = parseInt(movieID);\n    let purchased = [];\n    let balance = 0;\n    if(this.props.purchasedlist.length !== 0){\n      purchased = JSON.parse(this.props.purchasedlist);\n      balance  = purchased.balance;\n      purchased = purchased.purchasedlist;\n    }\n    let price = 0;\n    if(movie.vote_average < 4){\n      price = 3500;\n    }else if(movie.vote_average < 7){\n      price = 8250;\n    }else if(movie.vote_average < 9){\n      price = 16350;\n    }else{\n      price = 21250;\n    }\n    let ispurchased;\n    if(purchased.indexOf(movid) < 0){\n      ispurchased = <NumberFormat value={price} displayType={'text'} thousandSeparator={true} prefix={'Rp '} renderText={value => <button onClick={this.dispatchBalance.bind(this, balance, price, movid, purchased)} className=\"btnbuy\">Buy {value}</button>} />;\n    }else{\n      ispurchased = <button disabled className=\"btnbuy\">Purchase</button>;\n    }\n\n    const headerStyles = {\n      backgroundImage: `url(https://image.tmdb.org/t/p/w780${movie.backdrop_path})`\n    };\n\n    // console.log(movie.poster_path);\n    return(\n      <main className=\"main\" role=\"main\" style={headerStyles}>\n\n      <div className=\"topnav\">\n        <NavLink to=\"/\">Home</NavLink>\n        <div className=\"right_bar\">\n          <h4 style={{color: \"blue\"}}>Rp. 100,000</h4>\n        </div>\n      </div>\n\n        <div className=\"movie-details\">\n          <div className=\"movie_image\">\n            <img src={`https://image.tmdb.org/t/p/w500${movie.poster_path}`} alt={movie.original_title} />\n          </div>\n          <div className=\"details-body\">\n            <h1 className=\"movie-details_title\">{movie.original_title}</h1>\n            <h2 className=\"boldline\">{movie.tagline}</h2>\n            <p className=\"movie-details_body\">{movie.overview}</p>\n            <div className=\"list\">\n              <p className=\"movie-details_rating\">Rating : <span>{movie.vote_average}</span></p>\n              <p className=\"movie-details_date\">Release date : <span>{movie.release_date}</span></p>\n              <p>Duration : <span>{movie.runtime} min</span></p>\n              <p>Revenue : <span>{movie.revenue}</span></p>\n              <br />\n              {purchased}\n            </div>\n          </div>\n\n          <div className=\"col-sm-12\">\n          <h3 className=\"text-left\">Casts :</h3>\n\n            <Casts movieID={movieID} />\n\n          </div>\n\n          <div className=\"col-sm-12\">\n            <h2 className=\"text-center\">Trailers :</h2>\n            <Trailers movieID={movieID}/>\n          </div>\n\n          <div className=\"col-sm-6\">\n            <h2 className=\"text-center\">Related Films :</h2>\n            <Related movieID={movieID} />\n          </div>\n\n          <div className=\"col-sm-6\">\n            <h2 className=\"text-center\">Recommended :</h2>\n            <Recommended movieID={movieID}/>\n          </div>\n\n        </div>\n      </main>\n    )\n  }\n\n\n\n}\n\nfunction mapStateToProps(state){\n  return{\n    movie: state.movie,\n    purchasedlist: state.balance\n  }\n}\n\nfunction mapDispatchToProps(dispatch){\n  return{\n    actions: bindActionCreators(AppActions, dispatch)\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MovieDetail)\n"]},"metadata":{},"sourceType":"module"}