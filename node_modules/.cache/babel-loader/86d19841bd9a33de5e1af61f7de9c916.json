{"ast":null,"code":"import _classCallCheck from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bambang/Desktop/Mini-Project/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bambang/Desktop/Mini-Project/src/components/Movie/MovieDetail.js\";\nimport React, { Component } from 'react';\nimport Casts from './Casts';\nimport Related from './Related';\nimport Recommended from './Recommended';\nimport Trailers from './Trailers';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport NumberFormat from 'react-number-format';\nimport * as AppActions from '../../actions';\nimport { reactLocalStorage } from 'reactjs-localstorage';\nimport { NavLink } from 'react-router-dom';\nimport loader from \"../../img/puff.svg\";\n\nvar MovieDetail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MovieDetail, _Component);\n\n  function MovieDetail() {\n    _classCallCheck(this, MovieDetail);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MovieDetail).apply(this, arguments));\n  }\n\n  _createClass(MovieDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var id = this.props.match.params.id.split('-')[0];\n      this.props.actions.getMovie(id);\n      var purchased = [];\n      var balance;\n\n      if (this.props.purchasedlist.length !== 0) {\n        purchased = JSON.parse(this.props.purchasedlist);\n        balance = purchased.balance;\n        purchased = purchased.purchasedlist;\n        reactLocalStorage.set('balance', this.props.purchasedlist);\n      } else if (reactLocalStorage.get('balance')) {\n        var JSONbalance = JSON.parse(reactLocalStorage.get('balance'));\n        purchased = JSONbalance.purchasedlist;\n        balance = JSONbalance.balance;\n      }\n\n      this.props.actions.initBalance(balance, purchased);\n    }\n  }, {\n    key: \"order\",\n    value: function order(balance, price, movid, purchased) {\n      if (balance < price) {\n        alert(\"Insufficient balance\");\n        return false;\n      } else {\n        purchased.push(movid);\n        this.props.actions.balancePurchase(balance - price, purchased);\n        reactLocalStorage.set('balance', JSON.stringify({\n          'type': 'BALANCE_FETCH_DATA_SUCCESS',\n          'balance': balance - price,\n          'purchasedlist': purchased\n        }));\n        return true;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var movie = this.props.movie;\n      var headerStyles = {\n        backgroundImage: \"url(https://image.tmdb.org/t/p/w780\".concat(movie.backdrop_path, \")\")\n      }; // console.log(this.props);\n\n      var movieID = this.props.match.params.id.split('-')[0];\n      var movid = parseInt(movieID);\n      var price = 0;\n      var purchased = [];\n      var balance = 0;\n\n      if (this.props.loading) {\n        return React.createElement(\"div\", {\n          className: \"loader-overlay\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"loader\",\n          src: loader,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }));\n      } else {\n        var _purchased = [];\n        var _balance = 0;\n\n        if (this.props.purchasedlist.length !== 0) {\n          _purchased = JSON.parse(this.props.purchasedlist);\n          _balance = _purchased.balance;\n          _purchased = _purchased.purchasedlist;\n        }\n\n        if (movie.vote_average < 4) {\n          price = 3500;\n        } else if (movie.vote_average < 7) {\n          price = 8250;\n        } else if (movie.vote_average < 9) {\n          price = 16350;\n        } else {\n          price = 21250;\n        }\n\n        var buy;\n\n        if (_purchased.indexOf(movid) < 0) {\n          buy = React.createElement(NumberFormat, {\n            value: price,\n            displayType: 'text',\n            thousandSeparator: true,\n            prefix: 'Rp ',\n            renderText: function renderText(value) {\n              return React.createElement(\"button\", {\n                className: \"btn_buy\",\n                onClick: _this.order.bind(_this, _balance, price, movid, _purchased),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 78\n                },\n                __self: this\n              }, value);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          });\n        } else {\n          buy = React.createElement(\"button\", {\n            disabled: true,\n            className: \"btn_buy active\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80\n            },\n            __self: this\n          }, \"Purchase\");\n        } // console.log(movie.poster_path);\n\n\n        return React.createElement(\"main\", {\n          className: \"main\",\n          role: \"main\",\n          style: headerStyles,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, React.createElement(\"nav\", {\n          className: \"navbar navbar-dark bg-dark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(NavLink, {\n          className: \"nav-item active\",\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          className: \"navbar-brand\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, \"Home\")), React.createElement(NavLink, {\n          className: \"nav-item active\",\n          to: \"/popular\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          className: \"navbar-brand\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"Popular\")), React.createElement(\"div\", {\n          className: \"right_bar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          style: {\n            color: \"blue\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(NumberFormat, {\n          value: _balance,\n          displayType: 'text',\n          thousandSeparator: true,\n          prefix: 'Rp ',\n          renderText: function renderText(value) {\n            return React.createElement(\"span\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 95\n              },\n              __self: this\n            }, value);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        })))), React.createElement(\"div\", {\n          className: \"movie-details\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"movie_image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"https://image.tmdb.org/t/p/w500\".concat(movie.poster_path),\n          alt: movie.original_title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"details-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"movie-details_title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, movie.original_title), React.createElement(\"h2\", {\n          className: \"boldline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, movie.tagline), React.createElement(\"p\", {\n          className: \"movie-details_body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, movie.overview), React.createElement(\"div\", {\n          className: \"list\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"movie-details_rating\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, \"Rating : \", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, movie.vote_average)), React.createElement(\"p\", {\n          className: \"movie-details_date\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, \"Release date : \", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, movie.release_date)), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"Duration : \", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, movie.runtime, \" min\")), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"Revenue : \", React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, movie.revenue)), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }), buy)), React.createElement(\"div\", {\n          className: \"col-sm-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          className: \"text-left\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, \"Casts :\"), React.createElement(Casts, {\n          movieID: movieID,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-sm-12\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, \"Trailers :\"), React.createElement(Trailers, {\n          movieID: movieID,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-sm-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, \"Related Films :\"), React.createElement(Related, {\n          movieID: movieID,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"col-sm-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, \"Recommended :\"), React.createElement(Recommended, {\n          movieID: movieID,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }))));\n      }\n    }\n  }]);\n\n  return MovieDetail;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    movie: state.movie,\n    purchasedlist: state.balance,\n    loading: state.loading\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(AppActions, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieDetail);","map":{"version":3,"sources":["/home/bambang/Desktop/Mini-Project/src/components/Movie/MovieDetail.js"],"names":["React","Component","Casts","Related","Recommended","Trailers","bindActionCreators","connect","NumberFormat","AppActions","reactLocalStorage","NavLink","MovieDetail","id","props","match","params","split","actions","getMovie","purchased","balance","purchasedlist","length","JSON","parse","set","get","JSONbalance","initBalance","price","movid","alert","push","balancePurchase","stringify","movie","headerStyles","backgroundImage","backdrop_path","movieID","parseInt","loading","loader","vote_average","buy","indexOf","value","order","bind","color","poster_path","original_title","tagline","overview","release_date","runtime","revenue","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Casts from './Casts'\nimport Related from './Related'\nimport Recommended from './Recommended'\nimport Trailers from './Trailers'\nimport {bindActionCreators} from 'redux'\nimport {connect} from 'react-redux'\nimport NumberFormat from 'react-number-format';\nimport * as AppActions from '../../actions'\nimport {reactLocalStorage} from 'reactjs-localstorage';\nimport { NavLink } from 'react-router-dom'\nimport loader from '../../img/puff.svg';\n\nclass MovieDetail extends Component {\n  componentDidMount(){\n    let id = this.props.match.params.id.split('-')[0];\n    this.props.actions.getMovie(id)\n    let purchased = [];\n    let balance;\n    if(this.props.purchasedlist.length !== 0){\n      purchased = JSON.parse(this.props.purchasedlist);\n      balance = purchased.balance;\n      purchased = purchased.purchasedlist;\n      reactLocalStorage.set('balance', this.props.purchasedlist);\n    }else if(reactLocalStorage.get('balance')){\n      let JSONbalance = JSON.parse(reactLocalStorage.get('balance'));\n      purchased = JSONbalance.purchasedlist;\n      balance   = JSONbalance.balance;\n    }\n    this.props.actions.initBalance(balance, purchased);\n  }\n\n  order(balance, price, movid, purchased){\n    if(balance < price){\n      alert(\"Insufficient balance\");\n      return false;\n    }else{\n      purchased.push(movid);\n      this.props.actions.balancePurchase(balance-price, purchased);\n      reactLocalStorage.set('balance',(JSON.stringify({'type': 'BALANCE_FETCH_DATA_SUCCESS','balance': (balance-price),'purchasedlist': purchased})));\n      return true;\n    }\n  }\n\n  render(){\n    const {movie} = this.props;\n    const headerStyles = {\n      backgroundImage: `url(https://image.tmdb.org/t/p/w780${movie.backdrop_path})`\n    };\n    // console.log(this.props);\n    let movieID = this.props.match.params.id.split('-')[0];\n    let movid = parseInt(movieID);\n    let price = 0;\n    let purchased = [];\n    let balance = 0;\n    if (this.props.loading) {\n      return <div className=\"loader-overlay\"><img className=\"loader\" src={loader} alt=\"\" /></div>;\n    }else{\n      let purchased = [];\n      let balance = 0;\n      if(this.props.purchasedlist.length !== 0){\n        purchased = JSON.parse(this.props.purchasedlist);\n        balance  = purchased.balance;\n        purchased = purchased.purchasedlist;\n      }\n\n    if(movie.vote_average < 4){\n      price = 3500;\n    }else if(movie.vote_average < 7){\n      price = 8250;\n    }else if(movie.vote_average < 9){\n      price = 16350;\n    }else{\n      price = 21250;\n    }\n    let buy;\n    if(purchased.indexOf(movid) < 0){\n      buy = <NumberFormat value={price} displayType={'text'} thousandSeparator={true} prefix={'Rp '} renderText={value => <button className=\"btn_buy\" onClick={this.order.bind(this, balance, price, movid, purchased)}>{value}</button>} />;\n    }else{\n      buy = <button disabled className=\"btn_buy active\">Purchase</button>\n    }\n\n    // console.log(movie.poster_path);\n    return(\n      <main className=\"main\" role=\"main\" style={headerStyles}>\n\n        <nav className=\"navbar navbar-dark bg-dark\">\n          <NavLink className=\"nav-item active\" to=\"/\">\n            <li className=\"navbar-brand\">Home</li>\n          </NavLink>\n          <NavLink className=\"nav-item active\" to=\"/popular\">\n            <a className=\"navbar-brand\">Popular</a>\n          </NavLink>\n          <div className=\"right_bar\">\n            <h4 style={{color: \"blue\"}}><NumberFormat value={balance} displayType={'text'} thousandSeparator={true} prefix={'Rp '} renderText={value => <span>{value}</span>} /></h4>\n          </div>\n        </nav>\n\n        <div className=\"movie-details\">\n          <div className=\"movie_image\">\n            <img src={`https://image.tmdb.org/t/p/w500${movie.poster_path}`} alt={movie.original_title} />\n          </div>\n          <div className=\"details-body\">\n            <h1 className=\"movie-details_title\">{movie.original_title}</h1>\n            <h2 className=\"boldline\">{movie.tagline}</h2>\n            <p className=\"movie-details_body\">{movie.overview}</p>\n            <div className=\"list\">\n              <p className=\"movie-details_rating\">Rating : <span>{movie.vote_average}</span></p>\n              <p className=\"movie-details_date\">Release date : <span>{movie.release_date}</span></p>\n              <p>Duration : <span>{movie.runtime} min</span></p>\n              <p>Revenue : <span>{movie.revenue}</span></p>\n              <br />\n              {buy}\n            </div>\n          </div>\n\n          <div className=\"col-sm-12\">\n          <h3 className=\"text-left\">Casts :</h3>\n\n            <Casts movieID={movieID} />\n\n          </div>\n\n          <div className=\"col-sm-12\">\n            <h2 className=\"text-center\">Trailers :</h2>\n            <Trailers movieID={movieID}/>\n          </div>\n\n          <div className=\"col-sm-6\">\n            <h2 className=\"text-center\">Related Films :</h2>\n            <Related movieID={movieID} />\n          </div>\n\n          <div className=\"col-sm-6\">\n            <h2 className=\"text-center\">Recommended :</h2>\n            <Recommended movieID={movieID}/>\n          </div>\n\n        </div>\n      </main>\n      )\n    }\n  }\n}\n\nfunction mapStateToProps(state){\n  return{\n    movie: state.movie,\n    purchasedlist: state.balance,\n    loading: state.loading\n  }\n}\n\nfunction mapDispatchToProps(dispatch){\n  return{\n    actions: bindActionCreators(AppActions, dispatch)\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MovieDetail)\n"]},"metadata":{},"sourceType":"module"}